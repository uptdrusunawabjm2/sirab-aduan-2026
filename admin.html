<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Admin Pengaduan</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
html,body{height:100%;margin:0}
thead th{position:sticky;top:0;background:#0f172a;z-index:10}
</style>
</head>

<body class="bg-slate-950 text-white p-6">

<h1 class="text-2xl font-bold mb-4">Dashboard Admin Pengaduan</h1>

<table class="w-full border border-slate-800 text-sm">
<thead>
<tr id="thead" class="bg-slate-900"></tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
if(sessionStorage.getItem("login")!=="true"){
  location.href="login.html";
}

const API = "https://script.google.com/macros/s/AKfycbyFmS9G5xPYDyzL9l4-YCNbWgfLETiSkUlmOreWpbDYQmOXaz0wuMCEeoEZmm2-Kuvv/exec";
let headerGlobal = [];

async function load(){
  const r = await fetch(API);
  const j = await r.json();

  headerGlobal = j.data[0].map(x=>x);

  thead.innerHTML = headerGlobal.map(h=>`<th class="p-2 border">${h}</th>`).join("") + "<th>Aksi</th>";

  let html="";
  j.data.slice(1).forEach(row=>{
    html+="<tr>";
    row.forEach(c=>{
      html+=`<td class="border p-2">${c||""}</td>`;
    });
    html+=`<td class="border p-2 text-center">Edit di Sheet</td></tr>`;
  });

  tbody.innerHTML = html;
}

load();
</script>
</body>
</html>
